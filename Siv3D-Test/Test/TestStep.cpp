//-----------------------------------------------
//
//	This file is part of the Siv3D Engine.
//
//	Copyright (C) 2008-2016 Ryo Suzuki
//	Copyright (C) 2016 OpenSiv3D Project
//
//	Licensed under the MIT License.
//
//-----------------------------------------------

# include <Siv3D.hpp>
# include <gtest/gtest.h>

using namespace s3d;
using namespace s3d::literals;

TEST(Step, Iota)
{
	// 1 + 2 + 3 + ... + 100
	EXPECT_EQ(
		Iota(1, 101).reduce1(std::plus<>()),
		5050);

	// 100 の階乗
	EXPECT_EQ(
		Iota(1, 101).reduce1(std::multiplies<BigInt>()),
		L"93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000"_big);
	
	// 100000000000000000000000000000000000000000000000001
	// +
	// 100000000000000000000000000000000000000000000000002
	// +
	// ...
	// +
	// 100000000000000000000000000000000000000000000000100
	EXPECT_EQ(
		Iota(L"100000000000000000000000000000000000000000000000001"_big, L"100000000000000000000000000000000000000000000000101"_big).reduce1(std::plus<>()),
		L"10000000000000000000000000000000000000000000000005050"_big);
}

TEST(Step, Range)
{
	// 1 + 2 + 3 + ... + 100
	EXPECT_EQ(
		Range(1, 100).reduce1(std::plus<>()),
		5050);

	// 100 の階乗
	EXPECT_EQ(
		Range(1, 100).reduce1(std::multiplies<BigInt>()),
		L"93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000"_big);

	// 100000000000000000000000000000000000000000000000001
	// +
	// 100000000000000000000000000000000000000000000000002
	// +
	// ...
	// +
	// 100000000000000000000000000000000000000000000000100
	EXPECT_EQ(
		Range(L"100000000000000000000000000000000000000000000000001"_big, L"100000000000000000000000000000000000000000000000100"_big).reduce1(std::plus<>()),
		L"10000000000000000000000000000000000000000000000005050"_big);
}
